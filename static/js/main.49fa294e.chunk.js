(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{229:function(e,t,a){e.exports=a(484)},484:function(e,t,a){"use strict";a.r(t);a(230),a(280);var n=a(0),r=a.n(n),o=a(47),c=a.n(o),i=a(224),l=a(113),s=a(507),u=a(486),d=a(508),m=a(509),p=a(512),b=function(e){return r.a.createElement(p.a,Object.assign({variant:"contained",color:"primary",fullWidth:!0},e),"\u5f00\u59cb")},f=function(e){return r.a.createElement(p.a,Object.assign({variant:"contained",color:"primary",fullWidth:!0},e),"\u7ed3\u675f")},g=function(e){return r.a.createElement(p.a,Object.assign({variant:"contained",color:"primary",fullWidth:!0},e),"\u4e0b\u8f7d")},v=a(225),h=a(506),y=a(487),E=a(28),w=Object(u.a)({"@keyframes one":{to:{boxShadow:"0 0 0 5px #f51d1d94",opacity:1,transform:"scale(1)"}},root:{position:"absolute",right:20,top:20,boxSizing:"border-box",width:"22px",height:"22px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",border:"2px solid red",boxShadow:"0 red",transform:"scale(0.85)",animation:"$one 1s linear infinite alternate"},label:{boxSizing:"border-box",width:"12px",height:"12px",borderRadius:"50%",background:"#f00"}}),x=function(){var e=w();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.label}))},j=Object(u.a)(function(e){return{paper:{padding:e.spacing(1),height:500,position:"relative",background:"#eee",backgroundClip:"content-box"},video:{width:"100%",height:"100%",objectFit:"cover",background:"#eee"}}}),O=Object(E.a)(function(e){return{root:{marginTop:90}}})(function(e){var t=e.classes;return r.a.createElement(y.a,{variant:"h5",align:"center",color:"textSecondary",className:t.root},"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u529f\u80fd")}),k=r.a.forwardRef(function(e,t){var a=e.can,n=Object(v.a)(e,["can"]),o=j();return console.log(n,a),r.a.createElement(h.a,{className:o.paper,id:"box"},a?r.a.createElement("video",Object.assign({className:o.video,ref:t},n,{style:{display:n.autoPlay?"block":"none"}})):r.a.createElement(O,null),n.autoPlay&&r.a.createElement(x,null))}),S=a(141),R=a.n(S),D=a(220),N=a(114),W=Object(N.b)({initialState:{toggle:!1,controls:!1,url:""},reducers:{start:function(e,t){e.toggle=t.payload},stop:function(e,t){e.toggle=t.payload},controls:function(e,t){e.controls=t.payload},seturl:function(e,t){e.url=t.payload}}}),C=W.actions,B=W.reducer,M=C.start,P=C.stop,T=(C.controls,C.seturl),z=null,F=null,I=[],J=null,L=Object(u.a)(function(e){return{root:{padding:10}}}),U=Object(l.b)(function(e){return e},{asystart:function(e){return function(t){Object(D.a)(R.a.mark(function a(){return R.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});case 3:z=a.sent,J&&J.remove(),t(T("")),a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(0),console.log("Cancel capture"),a.abrupt("return");case 12:e.current.srcObject=z,(F=new MediaRecorder(z)).start(),F.ondataavailable=function(e){I.push(e.data)},F.onstop=function(e){var a=new Blob(I,{type:"video/mp4"}),n=window.URL.createObjectURL(a);z.getTracks().forEach(function(e){return e.stop()}),I=[];var r=document.createElement("a");r.download="aaa.mp4",r.href=n,t(T(n)),(J=document.createElement("video")).setAttribute("controls",!0),J.style.width="100%",J.style.height="100%",J.style.outline="none",J.src=n,document.querySelector("#box").append(J)},z.getVideoTracks()[0].onended=function(){t(P(!1)),F.stop()},t(M(!!z));case 19:case"end":return a.stop()}},a,null,[[0,8]])}))()}},asystop:function(e){return function(t){e&&F.stop(),t(P(!1))}}})(function(e){var t=L(),a=Object(n.useRef)(null),o=e.toggle,c=e.asystart,l=e.asystop,u=e.url,p=Object(n.useState)(!0),v=Object(i.a)(p,2),h=v[0],y=v[1];return Object(n.useEffect)(function(){var e=!!navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia;y(e)},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{maxWidth:"md"},r.a.createElement(d.a,{container:!0,spacing:1,className:t.root},r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(b,{disabled:o,onClick:h?function(e){return c(a)}:null})),r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(f,{onClick:function(e){return l(o)}})),r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(m.a,{href:u||null,download:u?"".concat(Date.now(),".mp4"):null,color:"inherit",underline:"none"},r.a.createElement(g,{disabled:!u}))),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(k,{ref:a,autoPlay:o,controls:!o,can:h})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(510),q=a(223),A=a(222),V=a.n(A),G=a(511),H=Object(N.a)({reducer:B}),K=Object(q.a)({palette:{primary:V.a}});c.a.render(r.a.createElement($.a,{theme:K},r.a.createElement(G.a,null),r.a.createElement(l.a,{store:H},r.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[229,1,2]]]);
//# sourceMappingURL=main.49fa294e.chunk.js.map