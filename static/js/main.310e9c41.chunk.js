(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{230:function(e,t,a){e.exports=a(487)},487:function(e,t,a){"use strict";a.r(t);a(231),a(281);var n=a(0),r=a.n(n),o=a(213),c=a(225),i=a(114),l=a(510),s=a(489),u=a(511),d=a(512),m=a(515),p=function(e){return r.a.createElement(m.a,Object.assign({variant:"contained",color:"primary",fullWidth:!0},e),"\u5f00\u59cb")},b=function(e){return r.a.createElement(m.a,Object.assign({variant:"contained",color:"primary",fullWidth:!0},e),"\u7ed3\u675f")},f=function(e){return r.a.createElement(m.a,Object.assign({variant:"contained",color:"primary",fullWidth:!0},e),"\u4e0b\u8f7d")},g=a(226),v=a(509),h=a(490),y=a(28),E=Object(s.a)({"@keyframes one":{to:{boxShadow:"0 0 0 5px #f51d1d94",opacity:1,transform:"scale(1)"}},root:{position:"absolute",right:20,top:20,boxSizing:"border-box",width:"22px",height:"22px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",border:"2px solid red",boxShadow:"0 red",transform:"scale(0.85)",animation:"$one 1s linear infinite alternate"},label:{boxSizing:"border-box",width:"12px",height:"12px",borderRadius:"50%",background:"#f00"}}),w=function(){var e=E();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.label}))},x=Object(s.a)(function(e){return{paper:{padding:e.spacing(1),height:500,position:"relative",background:"#eee",backgroundClip:"content-box"},video:{width:"100%",height:"100%",objectFit:"cover",background:"#eee"}}}),j=Object(y.a)(function(e){return{root:{marginTop:90}}})(function(e){var t=e.classes;return r.a.createElement(h.a,{variant:"h5",align:"center",color:"textSecondary",className:t.root},"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u529f\u80fd")}),O=r.a.forwardRef(function(e,t){var a=e.can,n=Object(g.a)(e,["can"]),o=x();return console.log(n,a),r.a.createElement(v.a,{className:o.paper,id:"box"},a?r.a.createElement("video",Object.assign({className:o.video,ref:t},n,{style:{display:n.autoPlay?"block":"none"}})):r.a.createElement(j,null),n.autoPlay&&r.a.createElement(w,null))}),k=a(141),S=a.n(k),R=a(221),D=a(115),N=Object(D.b)({initialState:{toggle:!1,controls:!1,url:""},reducers:{start:function(e,t){e.toggle=t.payload},stop:function(e,t){e.toggle=t.payload},controls:function(e,t){e.controls=t.payload},seturl:function(e,t){e.url=t.payload}}}),W=N.actions,C=N.reducer,B=W.start,M=W.stop,P=(W.controls,W.seturl),T=null,z=null,F=[],I=null,J=Object(s.a)(function(e){return{root:{padding:10}}}),L=Object(i.b)(function(e){return e},{asystart:function(e){return function(t){Object(R.a)(S.a.mark(function a(){return S.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});case 3:T=a.sent,I&&I.remove(),t(P("")),a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(0),console.log("Cancel capture"),a.abrupt("return");case 12:e.current.srcObject=T,(z=new MediaRecorder(T)).start(),z.ondataavailable=function(e){F.push(e.data)},z.onstop=function(e){var a=new Blob(F,{type:"video/mp4"}),n=window.URL.createObjectURL(a);T.getTracks().forEach(function(e){return e.stop()}),F=[];var r=document.createElement("a");r.download="aaa.mp4",r.href=n,t(P(n)),(I=document.createElement("video")).setAttribute("controls",!0),I.style.width="100%",I.style.height="100%",I.style.outline="none",I.src=n,document.querySelector("#box").append(I)},T.getVideoTracks()[0].onended=function(){t(M(!1)),z.stop()},t(B(!!T));case 19:case"end":return a.stop()}},a,null,[[0,8]])}))()}},asystop:function(e){return function(t){e&&z.stop(),t(M(!1))}}})(function(e){var t=J(),a=Object(n.useRef)(null),o=e.toggle,i=e.asystart,s=e.asystop,m=e.url,g=Object(n.useState)(!0),v=Object(c.a)(g,2),h=v[0],y=v[1];return Object(n.useEffect)(function(){var e=!!navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia;y(e)},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{maxWidth:"md"},r.a.createElement(u.a,{container:!0,spacing:1,className:t.root},r.a.createElement(u.a,{item:!0,xs:4},r.a.createElement(p,{disabled:o,onClick:h?function(e){return i(a)}:null})),r.a.createElement(u.a,{item:!0,xs:4},r.a.createElement(b,{onClick:function(e){return s(o)}})),r.a.createElement(u.a,{item:!0,xs:4},r.a.createElement(d.a,{href:m||null,download:m?"".concat(Date.now(),".mp4"):null,color:"inherit",underline:"none"},r.a.createElement(f,{disabled:!m}))),r.a.createElement(u.a,{item:!0,xs:12},r.a.createElement(O,{ref:a,autoPlay:o,controls:!o,can:h})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(513),$=a(224),q=a(223),A=a.n(q),V=a(514),G=Object(D.a)({reducer:C}),H=Object($.a)({palette:{primary:A.a}});Object(o.render)(r.a.createElement(U.a,{theme:H},r.a.createElement(V.a,null),r.a.createElement(i.a,{store:G},r.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[230,1,2]]]);
//# sourceMappingURL=main.310e9c41.chunk.js.map